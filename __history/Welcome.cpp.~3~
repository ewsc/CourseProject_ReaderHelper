//---------------------------------------------------------------------------

#include <vcl.h>
#include <iostream>
#include <fstream>
#include <string>
#pragma hdrstop

#include "Welcome.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma resource "*.dfm"

const string mainFolder = "readerdata";
const string preferenceFile = "preferences.readerdata";

TWelcomeForm *WelcomeForm;
//---------------------------------------------------------------------------
__fastcall TWelcomeForm::TWelcomeForm(TComponent* Owner)
	: TForm(Owner)
{
}
//---------------------------------------------------------------------------
void __fastcall TWelcomeForm::GoalEditChange(TObject *Sender)
{
	SubmitButton->Enabled = (StrToInt(GoalEdit->Text) > 0);
}

void addDataToFiles(int dailyGoal) {
	ofstream preferenceFile(mainFolder + "\\" + preferenceFile);
	preferenceFile << IntToStr(dailyGoal) << endl;
	preferenceFile.close();
}

//---------------------------------------------------------------------------
void __fastcall TWelcomeForm::SubmitButtonClick(TObject *Sender)
{
	int dailyGoal = StrToInt(GoalEdit->Text);
	addDataToFiles(dailyGoal);
	WelcomeForm.Close();
}
//---------------------------------------------------------------------------
